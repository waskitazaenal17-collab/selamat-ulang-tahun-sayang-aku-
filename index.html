<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Birthday Klarissa</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Poppins:wght@300;400&display=swap" rel="stylesheet">

    <style>
        :root {
            --gold: #D4AF37;
            --rose-gold: #B76E79;
            --cream: #FFFDD0;
            --bg-dark: #0F0F0F;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #FDFBF7;
            overflow: hidden;
            height: 100vh;
            display: flex; justify-content: center; align-items: center;
        }

        .screen {
            position: absolute; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            transition: all 1s ease;
        }
        .hidden { opacity: 0; pointer-events: none; z-index: -10 !important; }

        /* --- SCREEN 1: ENVELOPE --- */
        #screen-1 { background: #F4F4F4; z-index: 10; }
        .envelope-container { position: relative; cursor: pointer; z-index: 2; }
        .envelope {
            width: 320px; height: 220px;
            background: #1A2634; /* Deep Navy Blue */
            border-radius: 8px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            display: flex; justify-content: center; align-items: center;
            position: relative; overflow: hidden;
        }
        .flap {
            position: absolute; top: 0; left: 0;
            width: 0; height: 0;
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-top: 140px solid #243447; /* Slightly lighter navy */
            z-index: 3; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: top;
        }
        .wax-seal {
            width: 60px; height: 60px;
            background: var(--gold);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            color: #1A2634; font-family: 'Great Vibes'; font-size: 32px;
            z-index: 4;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 3px solid rgba(255,255,255,0.3);
            background: radial-gradient(circle at 30% 30%, #FFD700, #DAA520);
        }
        .envelope-container.open .flap { transform: rotateX(180deg); z-index: 1; }

        /* Efek Gold Dust saat buka amplop */
        .gold-particle {
            position: absolute; width: 8px; height: 8px;
            background: var(--gold); border-radius: 50%;
            z-index: 1; pointer-events: none;
        }

        /* --- SCREEN 2: LETTER --- */
        #screen-2 { z-index: 9; background: #FFF; padding: 30px; }
        .letter-content {
            max-width: 500px; text-align: center;
            padding: 40px;
            background: #FFF;
            border: 1px solid rgba(212, 175, 55, 0.3); /* Subtle gold border */
            box-shadow: 0 20px 60px rgba(0,0,0,0.05);
            border-radius: 15px;
        }
        h1 { font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--rose-gold); margin-bottom: 25px; }
        p { font-size: 1rem; color: #444; line-height: 1.8; margin-bottom: 30px; font-weight: 300; }
        .highlight { color: var(--rose-gold); font-weight: 500; }
        .btn-gold {
            background: linear-gradient(45deg, var(--gold), #B88A00); color: white;
            border: none; padding: 15px 40px; border-radius: 50px;
            font-family: 'Playfair Display', serif; letter-spacing: 1px; font-size: 1rem;
            cursor: pointer; box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3);
            transition: transform 0.2s;
        }
        .btn-gold:active { transform: scale(0.95); }

        /* --- SCREEN 3: LUXURY CAKE (UPDATED SPACING) --- */
        #screen-3 { z-index: 8; background: var(--bg-dark); color: var(--gold); }
        .wish-title {
            font-family: 'Playfair Display'; font-size: 2rem; letter-spacing: 2px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
            margin-bottom: 0; /* Reset margin */
        }
        
        /* PERBAIKAN JARAK DI SINI */
        .cake-container {
            position: relative;
            margin-top: 120px; /* Jarak yang jauh lebih lega */
            transform: scale(1.2); /* Kue sedikit lebih besar */
        }
        
        .layer-bottom {
            width: 220px; height: 90px; background: #FCE4EC;
            border-radius: 10px; position: relative;
            box-shadow: inset 0 -5px 20px rgba(0,0,0,0.1), 0 10px 20px rgba(0,0,0,0.3);
        }
        .gold-trim {
            position: absolute; bottom: 20px; width: 100%; height: 5px; background: var(--gold);
        }
        .layer-top {
            width: 160px; height: 80px; background: #FFF;
            border-radius: 10px 10px 5px 5px;
            position: absolute; bottom: 90px; left: 50%; transform: translateX(-50%);
            box-shadow: inset 0 -5px 10px rgba(0,0,0,0.05);
        }
        .drip-gold {
            position: absolute; top: 0; width: 100%; height: 30px;
            background: var(--gold); border-radius: 10px 10px 50% 50%;
        }
        .candle-lux {
            width: 10px; height: 70px; background: linear-gradient(to right, #FFF, #EEE);
            position: absolute; bottom: 170px; left: 50%; transform: translateX(-50%);
            border-radius: 5px; z-index: 5;
        }
        /* Api Lilin Realistis dengan Glow */
        .flame-lux {
            width: 18px; height: 30px;
            background: radial-gradient(ellipse at center, #FFFFCC 0%, #FFD700 60%, #FF4500 100%);
            position: absolute; top: -35px; left: 50%; transform: translateX(-50%);
            border-radius: 50% 50% 20% 20%;
            filter: blur(1px);
            box-shadow: 0 0 20px var(--gold), 0 0 50px var(--gold), 0 0 80px #FF4500;
            animation: flicker 1s infinite alternate; cursor: pointer;
        }
        @keyframes flicker {
            0% { transform: translateX(-50%) scale(1) rotate(-2deg); opacity: 1; }
            100% { transform: translateX(-50%) scale(1.1) rotate(2deg); opacity: 0.9; }
        }

        /* --- SCREEN 4: FINALE REALISTIS --- */
        #screen-4 { z-index: 7; background: radial-gradient(circle at center, #2C000E 0%, #000 100%); text-align: center; overflow: hidden; }
        .final-msg-container {
            z-index: 20; position: relative;
            opacity: 0; transform: translateY(50px); transition: all 2s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        .final-msg-container h1 { font-size: 4rem; margin-bottom: 10px; text-shadow: 0 5px 20px rgba(0,0,0,0.5); }
        
        /* ANIMASI BALON REALISTIS */
        .balloon {
            position: absolute; bottom: -150px;
            width: 60px; height: 75px;
            border-radius: 50% 50% 45% 45%;
            opacity: 0.85;
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.2);
            /* Gabungan animasi naik dan goyang */
            animation: floatUp linear forwards, sway ease-in-out infinite alternate;
        }
        .balloon::after { /* Tali Balon */
            content: ''; position: absolute; bottom: -25px; left: 50%;
            width: 1px; height: 30px; background: rgba(255,255,255,0.6);
        }
        @keyframes floatUp { to { bottom: 120vh; } }
        @keyframes sway { from { transform: translateX(-15px) rotate(-5deg); } to { transform: translateX(15px) rotate(5deg); } }

        /* ANIMASI KEMBANG API PARTIKEL */
        .firework-particle {
            position: absolute; width: 4px; height: 4px; border-radius: 50%;
            animation: explode ease-out forwards;
        }
        @keyframes explode {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }
    </style>
</head>
<body>

    <div id="screen-1" class="screen">
        <div class="envelope-container" onclick="openEnvelope(event)">
            <div class="envelope">
                <div class="flap"></div>
                <div class="wax-seal">K</div>
            </div>
        </div>
        <p style="margin-top: 50px; font-size: 0.8rem; letter-spacing: 3px; text-transform: uppercase; color: #888;">For Klarissa Intan Majestica</p>
    </div>

    <div id="screen-2" class="screen hidden">
        <div class="letter-content">
            <h1>Dearest Klarissa,</h1>
            <p>
                "Selamat ulang tahun sayang. Di hari ini kamu mulai dewasa, dan aku selalu berdoa apa yang kamu dan kita semogakan, semoga segera tersemogakan.
                <br><br>
                Mungkin kewajibanmu akan terasa lebih berat, tapi ingat sayang, <span class="highlight">aku akan selalu ada di samping kamu.</span>"
            </p>
            <button class="btn-gold" onclick="toCake()">Make a Wish ✨</button>
        </div>
    </div>

    <div id="screen-3" class="screen hidden">
        <h2 class="wish-title">Make a Wish...</h2>
        <div class="cake-container">
            <div class="candle-lux">
                <div class="flame-lux" id="flame" onclick="blowCandle()"></div>
            </div>
            <div class="layer-top"><div class="drip-gold"></div></div>
            <div class="layer-bottom"><div class="gold-trim"></div></div>
        </div>
        <p style="margin-top: 120px; font-size: 0.8rem; color: rgba(255,255,255,0.5); letter-spacing: 1px;">KETUK API UNTUK MENIUP</p>
    </div>

    <div id="screen-4" class="screen hidden">
        <div class="final-msg-container" id="final-msg">
            <h1>I Love You</h1>
            <p style="font-family: 'Playfair Display'; font-size: 1.2rem; color: #EEE;">
                You are my today and all of my tomorrows.<br>
                Happy Birthday, <b>Klarissa Intan Majestica</b>.
            </p>
            <p style="font-size: 4rem; margin-top: 30px;">❤️</p>
        </div>
    </div>

    <script>
        // --- FUNGSI EFEK BUKA AMPLOP (GOLD DUST BURST) ---
        function openEnvelope(e) {
            const container = document.querySelector('.envelope-container');
            if(container.classList.contains('open')) return; // Cegah klik ganda
            
            container.classList.add('open');
            
            // Buat ledakan partikel emas dari tengah amplop
            const rect = container.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            for (let i = 0; i < 50; i++) {
                createGoldParticle(centerX, centerY);
            }

            // Pindah layar setelah animasi selesai
            setTimeout(() => {
                document.getElementById('screen-1').classList.add('hidden');
                document.getElementById('screen-2').classList.remove('hidden');
            }, 1200);
        }

        function createGoldParticle(x, y) {
            const particle = document.createElement('div');
            particle.classList.add('gold-particle');
            document.body.appendChild(particle);
            
            // Acak arah ledakan ke atas
            const angle = (Math.random() * 90 + 45) * (Math.PI / 180); // Sudut 45-135 derajat (arah atas)
            const velocity = Math.random() * 150 + 50;
            const tx = Math.cos(angle) * velocity * (Math.random() > 0.5 ? 1 : -1);
            const ty = -Math.sin(angle) * velocity * 1.5;

            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            particle.style.transform = `translate(${tx}px, ${ty}px)`;
            particle.style.opacity = 0;
            particle.style.transition = 'all 1s ease-out';
            
            setTimeout(() => particle.remove(), 1000);
        }


        // --- FUNGSI NAVIGASI LAINNYA ---
        function toCake() {
            document.getElementById('screen-2').classList.add('hidden');
            document.getElementById('screen-3').classList.remove('hidden');
        }

        function blowCandle() {
            const flame = document.getElementById('flame');
            flame.style.transition = 'all 0.5s ease';
            flame.style.transform = 'translateX(-50%) scale(0)';
            flame.style.opacity = '0';
            
            setTimeout(() => {
                document.getElementById('screen-3').classList.add('hidden');
                document.getElementById('screen-4').classList.remove('hidden');
                
                setTimeout(() => {
                    const msg = document.getElementById('final-msg');
                    msg.style.opacity = '1';
                    msg.style.transform = 'translateY(0)';
                }, 500);

                startRealAnimations();
            }, 1000);
        }


        // --- FUNGSI ANIMASI FINALE REALISTIS ---
        function startRealAnimations() {
            const screen4 = document.getElementById('screen-4');
            const colors = ['#D4AF37', '#B76E79', '#FF69B4', '#FFF', '#FFD700'];

            // 1. Balon Realistis (Goyang & Transparan)
            setInterval(() => {
                const balloon = document.createElement('div');
                balloon.classList.add('balloon');
                balloon.style.left = Math.random() * 90 + 5 + 'vw';
                balloon.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                // Kecepatan naik dan kecepatan goyang diacak biar natural
                balloon.style.animationDuration = `${Math.random()*3+5}s, ${Math.random()*2+2}s`;
                screen4.appendChild(balloon);
                setTimeout(() => balloon.remove(), 8000);
            }, 600);

            // 2. Kembang Api Partikel Realistis
            setInterval(() => {
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * (window.innerHeight * 0.4);
                const color = colors[Math.floor(Math.random() * colors.length)];
                explodeFireworks(x, y, color);
            }, 1200);
        }

        function explodeFireworks(x, y, color) {
            const screen4 = document.getElementById('screen-4');
            for (let i = 0; i < 30; i++) { // 30 partikel per ledakan
                const particle = document.createElement('div');
                particle.classList.add('firework-particle');
                particle.style.backgroundColor = color;
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                
                // Kalkulasi arah ledakan menyebar lingkaran
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 100 + 50;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                // Set variabel CSS untuk animasi
                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);
                particle.style.animationDuration = Math.random() * 0.5 + 0.5 + 's';
                
                screen4.appendChild(particle);
                setTimeout(() => particle.remove(), 1000);
            }
        }
    </script>
</body>
</html>
